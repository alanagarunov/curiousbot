
# Curiousbot

This is a Discord bot , made using the discord.py api found here: https://github.com/Rapptz/discord.py

This bot also utilizes a second api, pyOWM, for weather found here: https://github.com/csparpa/pyowm

There are many uses of the bot described in the features section. Any feature that has complex interactive ability will described in more detail in the Usage section.

## Setup
To setup all requirements and your virtual environments just follow the following string of text. Execute each line one by one. (Note: Windows specific instructions, Linux differs slightly)
```
python -m venv env
source env/scripts/activate
pip install -r requirements.txt
```
To exit your virtual environment, execute
```
deactivate
```

To run the bot, make sure you have entered your bot's token, then execute the following
```
python curiousbot.py
```
You should see a message that says "We have logged in as \<username\>#\<discriminator\>" after a few seconds.

## Usage/Examples for Stock Simulator
Note: people wishing to create a profile should attempt to buy one stock (might need to do it twice).

In order to trade a stock, use the following command:
```
<prefix> $<ticker> <buy, sell> <amount>
```
Where prefix is your bot's prefix, and ticker is the ticker symbol of your stock. The amount refers to the amount of shares.


If you would like to view your profile, use the following command:
```
<prefix> getprofilevalue
```
Where prefix is your bot's prefix, and it will display how much (paper) money you currently have.

If you are just interested in the current stock price, you can use:
```
<prefix> getstockvalue
```
Where prefix is your bot's prefix, and it will display the stock's current price.


# Markov Chain Text Generator
There are multiple ways to setup the text generator, however they all require a bit of manual modification on your end. A future improvement would to make this much more streamlined.  
To use the text generator, First, copy the dictionaryexample.json to the main directory of the repository and change "example" to any name. Remember this name.  
Inside curiousboy.py, look for the on_message function. First, paste in the channel ID where <name_of_channel> is, that the bot has message-read permissions in.  
Then, add the user you want by copying their user ID (right click on their nickname and click "copy ID") and pasting it in <user_id>. Then, replace <same_as_filename> as the name of the dictionary file that you copied.  
Do this for every user.

### Generating text
In order to generate text, you need to copy and paste this block of code, for each user you added, in main.py:  
```
@client.command(name = "examplesimulator",
                description = "creates a random sentence",
                brief = "markov chain data harvesting project")
async def examplesimulator(ctx):
    try:
        coolmessage = maingenerator("<same_as_filename>")
        await ctx.send(coolmessage)
    except Exception as e:
        await ctx.send("Ping @curiousdoge#4240 with the following error message: " + str(e))
```  
Change <same_as_filename> with the name of the dictionary file associated with the user, and the name under the client.command arguments to furthur individualize the command.  
Then, in a chat the discord bot is in, type ```<prefix> examplesimulator``` to generate some text.

You can modify the length of text generated by going to markov_generator.py and changing the length variable. The variable length is measured in characters.

### Testing

The stock simulator has two tests that creates a profile and buys a stock to check to see if the simulator is working properly still. To run it, on a terminal in the main directory of the bot run
```
python -m unittest tests/test_stock_simulator.py
```
The test should return "OK" if successful.

  
## Features

- Logging Capabilities: Logs all messages where the bot has read messages permissions and stores it locally.
- Stock Simulator: Buy and sell a (virtual) stock in chat.
- Markov Chain Text Generator (Python Version)
- Weather Checking from chat. Uses both api access and discord embedding via the website https://wttr.in 




